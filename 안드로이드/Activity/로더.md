# 로더

Loader의 역할 : `Content Provider` 또는 `FragmentActivity` 또는 `Fragment`에 표시하기 위한 다른 데이터 소스에서 데이터를 로드 할 수 있다.

- 액티비티나 프래그먼트에서 데이터를 직접 가져올 경우, UI스레드에서 처리 속도가 느릴 가능성이 있는 쿼리를 실행하기 떄문에 반응이 없을 수 있다.
- 가령 `AsyncTask`를 사용해서 다른 스레드에서 데이터를 가져올 경우, 다양한 액티비티 또는 프래그먼트 수명 주기 이벤트(ex. `onDestory()`와 구성 변경사항)를 통해 스레드와 UI스레드를 모두 관리해야한다.



Loader의 장점

- 로더는 별도의 스레드에서 실행되어 UI가 느리거나 반응이 차단되지 않도록한다.
- 로더는 이벤트가 발생해을 때 콜백 메서드를 제공해 스레드 관리를 단순화 한다.
- 로더는 구성이변경 되더라도 결과를 유지하고 캐싱하므로 중복 쿼리가 방지된다.
- 로더는 고나찰자를 구현해 기본 데이터 소스의 변경 사항을 모니터링 할 수 있다.
  - `CursorLoader`는 `ContentObserver`를 자동으로 등록하여 데이터에 변경이 발생하면 새로고침을 트리거한다.



### 로더는 Android P(API 28)부터 사용이 `중단` 되었다.

- 액티비티와 프래그먼트 수명 주기를 처리하면서 데이터 로딩을 처리할 때는 `ViewModels`와 `LiveData`를 함께 사용하는 방법을 추천
- `ViewModels`는 로더와 같은 구성 변경에도 유지되지만 <u>상용구가 적다</u>
  - `LiveData `는 life cycle을 인식하고 데이터를 로드하는 방식 제공하는데, 이는 여러 `ViewModels`에서 다시 사용할 수 있다.
- **MediatorLiveData**를 사용하여 LiveData를 결합할 수도 있고 **Room**에서 발생한 쿼리와 같이 모든 식별 가능한 쿼리를 사용하여 데이터에 대한 변경 사항을 식별 할 수 동 ㅣㅆ다.
- LoaderManager에 액세스 할 수 없는 상황(ex. Service)에서도 ViewModel와 LiveDta를 사용 할 수 있다.
  - 두 가지를 동시에 사용하면 UI 수명 주기를 처리하지 않고도 앱이 필요로 하는 데이터에 간편하게 액세스 할 수 있다. 